<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>R-TYPE: Code organisation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">R-TYPE
   </div>
   <div id="projectbrief">Shoot&#39;em up game</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Code organisation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The game's architecture is such that everything is centered around the ECS. Effectively everything (or close to it) is stored somewhere in the global <code>gCoordinator</code> object, which represents the ECS in its entirety, and effectively all the rest of the code is centered around making use of the ECS's various systems, with a few classes centered around managing this with names such as <code><a class="el" href="classNetworkManager.html">NetworkManager</a></code> or <code><a class="el" href="classSceneManager.html">SceneManager</a></code>.</p>
<p>For example, the client's main loop is contained in a <code><a class="el" href="classSceneManager.html">SceneManager</a></code>, which manages the main loop along with the transitions between the different possible scenes (such as the single player mode, the main menu or the multiplayer mode). This is not needed for the server as it serves solely to support the multiplayer mode.</p>
<p>The client and server also make use of <code><a class="el" href="classNetworkManager.html">NetworkManager</a></code> classes, which serve the game's network needs, in which the client needs to communicate with the server in a pre-determined and stable way.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
The ECS</h1>
<p>As the ECS is the most important part of the game, this section dedicates itself to detailing the various uses made of it in the project.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
Components</h2>
<p>The ECS has a large amount of components. These are:</p>
<h3><a class="anchor" id="autotoc_md8"></a>
Enemy</h3>
<p>Represents information associated with an enemy type, associating an ID with the required information needed to spawn an enemy. At the beginning of the game, the ECS is filled with entities that each contain one of the enemy types the game can use by default.</p>
<h3><a class="anchor" id="autotoc_md9"></a>
Level</h3>
<p>Represents information associated with a level, in particular a path to a file containing information needed to start a level. At the beginning of the game, the ECS is filled with entities that each contain one of the available levels (as found in <code>./assets/levels</code>) that can be played in the game.</p>
<h3><a class="anchor" id="autotoc_md10"></a>
Movement</h3>
<p>Represents the movement of an entity. Any entity that needs to move must have a <a class="el" href="structMovement.html">Movement</a> component filled in with the value of the movement the game wants it to take (along with a <a class="el" href="structTransform.html">Transform</a> component to accordingly modify)</p>
<h3><a class="anchor" id="autotoc_md11"></a>
Network</h3>
<p>Represents client information in an entity. Whenever a client connects, an entity that contains the <a class="el" href="structNetwork.html">Network</a> component is filled in with the appropriate information such as to make it possible to communicate with clients over the ECS (note: that entity is also used to contain the player sprite and other associated things, i.e. one can communicate with a client easily if they have the matching entity that also contains the player information/sprite/position/etc.)</p>
<h3><a class="anchor" id="autotoc_md12"></a>
NetworkEntity</h3>
<p>Represents the ID of an entity that is associated with a remote entity on the server. Any entity that needs to be able to be matched to a remote entity must have an accordingly set <a class="el" href="structNetworkEntity.html">NetworkEntity</a> with the proper ID.</p>
<h3><a class="anchor" id="autotoc_md13"></a>
Player</h3>
<p>Represents information associated with a player. Any entity that must be considered to be a player needs to have the <a class="el" href="structPlayer.html">Player</a> component filled in.</p>
<h3><a class="anchor" id="autotoc_md14"></a>
Projectile</h3>
<p>Represents information associated with a projectile. Any entity that needs to deal damage upon contact needs to have the <a class="el" href="structProjectile.html">Projectile</a> component filled in.</p>
<h3><a class="anchor" id="autotoc_md15"></a>
RigidBody</h3>
<p>Represents information associated with a solid entity. Any entity that needs to be solid (so, say, they have a hitbox) needs to have the <a class="el" href="structRigidBody.html">RigidBody</a> component filled in (along with having a <a class="el" href="structTransform.html">Transform</a> component to get the base of the hitbox from, of course).</p>
<h3><a class="anchor" id="autotoc_md16"></a>
Sprite</h3>
<p>Represents information associated with a displayed entity. Any entity that needs to be displayed on the screen (as they are otherwise invisible) needs to have the <a class="el" href="structSprite.html">Sprite</a> component filled in.</p>
<h3><a class="anchor" id="autotoc_md17"></a>
Text</h3>
<p>Represents information associated with displayed text. Any entity that needs to be displayed as text on the screen needs to have the <a class="el" href="structText.html">Text</a> component filled in (along with having a <a class="el" href="structTransform.html">Transform</a> component to have a position to place the text at).</p>
<h3><a class="anchor" id="autotoc_md18"></a>
Transform</h3>
<p>Represents information associated with an entity's position. Any entity that needs to have a position needs to have the <a class="el" href="structTransform.html">Transform</a> component filled in.</p>
<h3><a class="anchor" id="autotoc_md19"></a>
Weapon</h3>
<p>Represents information associated with an entity's weapon. Any entity that needs to have a weapon (in particular if they want to be able to fire projectiles with one) needs to have the <a class="el" href="structWeapon.html">Weapon</a> component filled in.</p>
<h1><a class="anchor" id="autotoc_md20"></a>
Network Managers</h1>
<p>Both the client and server contain <a class="el" href="structNetwork.html">Network</a> Manager classes, although they are slightly different in the two so as to accomodate the different ways in which the client and server operate when using the network. It should be noted that documentation about the protocol that the server and client use to communicate R-Type information is not located here, but in this separate page, although this page also contains some details about the implementation of it used in the game. The game also has a separate layer to handle network instability and other problems with using UDP, for which a specification can be found here, although this page also contains some details about the implementation of it used in the game.</p>
<p>The network managers are used by the game to handle communication between the server and the client. In particular, a thread is run for the purpose of getting packets from the network (using the <code>run</code> method of the <a class="el" href="structNetwork.html">Network</a> Manager classes) that the game can later process. They also provide facilities for sending packets (for the server, a <code><a class="el" href="classNetworkClientManager.html">NetworkClientManager</a></code> is created for each connection and can be used to send data to a particular client - the <code><a class="el" href="structNetwork.html">Network</a></code> ECS component is used to provide access to clients through the ECS).</p>
<p>Different types of network packets that may be sent are managed through various classes that implement the <code><a class="el" href="classPacket.html">Packet</a></code> interface, with each new type implementing the <code>readPacket</code> (used when creating a packet based on data received from the network), <code>writePacket</code> (used when preparing data to be sent on the network) and <code>processPacket</code> interfaces (which are called to do packet-specific actions while processing them).</p>
<p>The packet types that implement <code><a class="el" href="classPacket.html">Packet</a></code> are translated into packets that can be used with the R-Type Protocol using facilities provided in <code><a class="el" href="connection__state_8hpp_source.html">connection_state.hpp</a></code>: in particular, several functions that allow one to obtain a packet's ID based on a pointer to an instance of it, and functions that allow one to construct a packet of a given type based on an ID obtained on the network are provided.</p>
<p>It should be noted that this document does not actually detail the different kinds of packets that the R-Type Protocol is used to communicate, as such information is available in the R-Type Protocol specification in section 2.4..</p>
<h1><a class="anchor" id="autotoc_md21"></a>
ReliableUdpConnection</h1>
<p>Both the client and server's <a class="el" href="structNetwork.html">Network</a> Managers make use of an underlying class called <code><a class="el" href="classReliableUdpConnection.html">ReliableUdpConnection</a></code>, which implements the Reliable User Datagram Protocol as specified in this document.</p>
<p><code><a class="el" href="classReliableUdpConnection.html">ReliableUdpConnection</a></code> provides several generic interfaces for:</p>
<ul>
<li>Opening a connection (both in listening and sending mode)</li>
<li>Sending packets</li>
<li>Receiving packets</li>
<li>Closing connections</li>
<li>Status checking (<code>isOpen</code>, etc.)</li>
</ul>
<p>which can be used to send arbitrary data on the network, although this project uses it as the underlying low-level protocol for the R-Type Protocol. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
