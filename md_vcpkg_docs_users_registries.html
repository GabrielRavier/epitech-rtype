<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>R-TYPE: Using Registries</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">R-TYPE
   </div>
   <div id="projectbrief">Shoot&#39;em up game</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Using Registries </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>The latest version of this documentation is available on <a href="https://github.com/Microsoft/vcpkg/tree/master/docs/users/registries.md">GitHub</a>.</b></p>
<p>There are two parts to using registries; this documents the use side of the relationship. In order to learn more about creating registries for others to use, please read ../maintainers/registries.md "this documentation".</p>
<h1><a class="anchor" id="autotoc_md1292"></a>
Table of Contents</h1>
<ul>
<li><a href="#using-registries">Using Registries</a><ul>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#vcpkg-configurationjson"><code>vcpkg-configuration.json</code></a><ul>
<li><a href="#registry-objects">Registry Objects</a><ul>
<li><a href="#registry-objects-kind">Registry Objects: <code>"kind"</code></a></li>
<li><a href="#registry-objects-baseline">Registry Objects: <code>"baseline"</code></a></li>
<li><a href="#registry-objects-repository">Registry Objects: <code>"repository"</code></a></li>
<li><a href="#registry-objects-path">Registry Objects: <code>"path"</code></a></li>
</ul>
</li>
<li><a href="#configuration-default-registry">Configuration: <code>"default-registry"</code></a></li>
<li><a href="#configuration-registries">Configuration: <code>"registries"</code></a></li>
<li><a href="#example-configuration-file">Example Configuration File</a></li>
</ul>
</li>
<li><a href="#package-name-resolution">Package Name Resolution</a><ul>
<li><a href="#versioning-support">Versioning Support</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md1293"></a>
&lt;tt&gt;vcpkg-configuration.json&lt;/tt&gt;</h1>
<p>From a high level perspective, everything that a project needs to define about registries is contained in the vcpkg configuration file. In classic mode, the configuration file lies in the vcpkg root; for manifest mode, the file must exist next to the project's <code>vcpkg.json</code> file. This file is named <code>vcpkg-configuration.json</code>, and it's a simple top-level object file.</p>
<h2><a class="anchor" id="autotoc_md1294"></a>
Registry Objects</h2>
<p>Registries are defined in JSON as objects. They must contain at least the <code>"kind"</code> and <code>"baseline"</code> fields, and additionally the different kinds of registry will have their own way of defining where the registry can be found:</p>
<ul>
<li>git registries require the <code>"repository"</code> field</li>
<li>filesystem registries require the <code>"path"</code> field</li>
<li>built-in registries do not require a field, since there is only one built-in registry.</li>
</ul>
<h3><a class="anchor" id="autotoc_md1295"></a>
Registry Objects: &lt;tt&gt;"kind"&lt;/tt&gt;</h3>
<p>The <code>"kind"</code> field must be a string:</p>
<ul>
<li>For git registries: <code>"git"</code></li>
<li>For filesystem registries: <code>"filesystem"</code></li>
<li>For the builtin registry: <code>"builtin"</code></li>
</ul>
<h3><a class="anchor" id="autotoc_md1296"></a>
Registry Objects: &lt;tt&gt;"baseline"&lt;/tt&gt;</h3>
<p>The <code>"baseline"</code> field must be a string. It defines a minimum version for all packages coming from this registry configuration.</p>
<p>For <a href="../maintainers/registries.md#git-registries">Git Registries</a> and for the <a href="../maintainers/registries.md#builtin-registries">Builtin Registry</a>, it should be a 40-character git commit sha in the registry's repository that contains a <code>versions/baseline.json</code>.</p>
<p>For <a href="../maintainers/registries.md#filesystem-registries">Filesystem Registries</a>, it can be any valid baseline string that the registry defines.</p>
<h3><a class="anchor" id="autotoc_md1297"></a>
Registry Objects: &lt;tt&gt;"repository"&lt;/tt&gt;</h3>
<p>This should be a string, of any repository format that git understands:</p>
<ul>
<li><code>"https://github.com/microsoft/vcpkg"</code></li>
<li><code>"git@github.com:microsoft/vcpkg"</code></li>
<li><code>"/dev/vcpkg-registry"</code></li>
</ul>
<h3><a class="anchor" id="autotoc_md1298"></a>
Registry Objects: &lt;tt&gt;"path"&lt;/tt&gt;</h3>
<p>This should be a path; it can be either absolute or relative; relative paths will be based at the directory the <code>vcpkg-configuration.json</code> lives in.</p>
<h2><a class="anchor" id="autotoc_md1299"></a>
Configuration: &lt;tt&gt;"default-registry"&lt;/tt&gt;</h2>
<p>The <code>"default-registry"</code> field should be a registry object. It defines the registry that is used for all packages that are not claimed by any package registries. It may also be <code>null</code>, in which case no packages that are not claimed by package registries may be installed.</p>
<h2><a class="anchor" id="autotoc_md1300"></a>
Configuration: &lt;tt&gt;"registries"&lt;/tt&gt;</h2>
<p>The <code>"registries"</code> field should be an array of registry objects, each of which additionally contain a <code>"packages"</code> field, which should be an array of package names. These define the package registries, which are used for the specific packages named by the <code>"packages"</code> field.</p>
<p>The <code>"packages"</code> fields of all the package registries must be disjoint.</p>
<h2><a class="anchor" id="autotoc_md1301"></a>
Example Configuration File</h2>
<p>Let's assume that you have mirrored <a href="https://github.com/microsoft/vcpkg">https://github.com/microsoft/vcpkg</a> at <a href="https://git.example.com/vcpkg">https://git.example.com/vcpkg</a>: this will be your default registry. Additionally, you want to use North Wind Trader's registry for their beison and beicode libraries. The following <code>vcpkg-configuration.json</code> will work:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;default-registry&quot;: {</div>
<div class="line">    &quot;kind&quot;: &quot;git&quot;,</div>
<div class="line">    &quot;repository&quot;: &quot;https://internal/mirror/of/github.com/Microsoft/vcpkg&quot;,</div>
<div class="line">    &quot;baseline&quot;: &quot;eefee7408133f3a0fef711ef9c6a3677b7e06fd7&quot;</div>
<div class="line">  },</div>
<div class="line">  &quot;registries&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;kind&quot;: &quot;git&quot;,</div>
<div class="line">      &quot;repository&quot;: &quot;https://github.com/northwindtraders/vcpkg-registry&quot;,</div>
<div class="line">      &quot;baseline&quot;: &quot;dacf4de488094a384ca2c202b923ccc097956e0c&quot;,</div>
<div class="line">      &quot;packages&quot;: [ &quot;beicode&quot;, &quot;beison&quot; ]</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1302"></a>
Package Name Resolution</h1>
<p>The way package name resolution works in vcpkg is fairly distinct from many package managers. It is very carefully designed to <em>never</em> implicitly choose the registry that a package is fetched from. Just from <code>vcpkg-configuration.json</code>, one can tell exactly from which registry a package definition will be fetched from.</p>
<p>The name resolution algorithm is as follows:</p>
<ul>
<li>If there is a package registry that claims the package name, use that registry; otherwise</li>
<li>If there is a default registry defined, use that registry; otherwise</li>
<li>If the default registry is set to <code>null</code>, error out; otherwise</li>
<li>use the built-in registry.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1303"></a>
Versioning Support</h2>
<p>Versioning with custom registries works exactly as it does in the built-in registry. You can read more about that in the versioning documentation. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
